{"ast":null,"code":"import React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport mergeRefs from 'merge-refs';\nimport invariant from 'tiny-invariant';\nimport warning from 'tiny-warning';\nimport * as pdfjs from 'pdfjs-dist';\nimport StructTree from '../StructTree';\nimport usePageContext from '../shared/hooks/usePageContext';\nimport { cancelRunningTask, getDevicePixelRatio, isCancelException, makePageCallback } from '../shared/utils';\nimport { isRef } from '../shared/propTypes';\nvar ANNOTATION_MODE = pdfjs.AnnotationMode;\nexport default function PageCanvas(props) {\n  var pageContext = usePageContext();\n  invariant(pageContext, 'Unable to find Page context.');\n  var mergedProps = Object.assign(Object.assign({}, pageContext), props);\n  var _className = mergedProps._className,\n    canvasBackground = mergedProps.canvasBackground,\n    devicePixelRatioProps = mergedProps.devicePixelRatio,\n    onRenderErrorProps = mergedProps.onRenderError,\n    onRenderSuccessProps = mergedProps.onRenderSuccess,\n    page = mergedProps.page,\n    renderForms = mergedProps.renderForms,\n    renderTextLayer = mergedProps.renderTextLayer,\n    rotate = mergedProps.rotate,\n    scale = mergedProps.scale;\n  var canvasRef = props.canvasRef;\n  var canvasElement = useRef(null);\n  invariant(page, 'Attempted to render page canvas, but no page was specified.');\n  var devicePixelRatio = devicePixelRatioProps || getDevicePixelRatio();\n  /**\n   * Called when a page is rendered successfully.\n   */\n  function onRenderSuccess() {\n    if (!page) {\n      // Impossible, but TypeScript doesn't know that\n      return;\n    }\n    if (onRenderSuccessProps) {\n      onRenderSuccessProps(makePageCallback(page, scale));\n    }\n  }\n  /**\n   * Called when a page fails to render.\n   */\n  function onRenderError(error) {\n    if (isCancelException(error)) {\n      return;\n    }\n    warning(false, error.toString());\n    if (onRenderErrorProps) {\n      onRenderErrorProps(error);\n    }\n  }\n  var renderViewport = useMemo(function () {\n    return page.getViewport({\n      scale: scale * devicePixelRatio,\n      rotation: rotate\n    });\n  }, [devicePixelRatio, page, rotate, scale]);\n  var viewport = useMemo(function () {\n    return page.getViewport({\n      scale: scale,\n      rotation: rotate\n    });\n  }, [page, rotate, scale]);\n  function drawPageOnCanvas() {\n    if (!page) {\n      return;\n    }\n    // Ensures the canvas will be re-rendered from scratch. Otherwise all form data will stay.\n    page.cleanup();\n    var canvas = canvasElement.current;\n    if (!canvas) {\n      return;\n    }\n    canvas.width = renderViewport.width;\n    canvas.height = renderViewport.height;\n    canvas.style.width = \"\".concat(Math.floor(viewport.width), \"px\");\n    canvas.style.height = \"\".concat(Math.floor(viewport.height), \"px\");\n    canvas.style.visibility = 'hidden';\n    var renderContext = {\n      annotationMode: renderForms ? ANNOTATION_MODE.ENABLE_FORMS : ANNOTATION_MODE.ENABLE,\n      canvasContext: canvas.getContext('2d', {\n        alpha: false\n      }),\n      viewport: renderViewport\n    };\n    if (canvasBackground) {\n      renderContext.background = canvasBackground;\n    }\n    var cancellable = page.render(renderContext);\n    var runningTask = cancellable;\n    cancellable.promise.then(function () {\n      canvas.style.visibility = '';\n      onRenderSuccess();\n    }).catch(onRenderError);\n    return function () {\n      return cancelRunningTask(runningTask);\n    };\n  }\n  useEffect(drawPageOnCanvas,\n  // Ommitted callbacks so they are not called every time they change\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [canvasBackground, canvasElement, devicePixelRatio, page, renderForms, renderViewport, viewport]);\n  var cleanup = useCallback(function () {\n    var canvas = canvasElement.current;\n    /**\n     * Zeroing the width and height cause most browsers to release graphics\n     * resources immediately, which can greatly reduce memory consumption.\n     */\n    if (canvas) {\n      canvas.width = 0;\n      canvas.height = 0;\n    }\n  }, [canvasElement]);\n  useEffect(function () {\n    return cleanup;\n  }, [cleanup]);\n  return React.createElement(\"canvas\", {\n    className: \"\".concat(_className, \"__canvas\"),\n    dir: \"ltr\",\n    ref: mergeRefs(canvasRef, canvasElement),\n    style: {\n      display: 'block',\n      userSelect: 'none'\n    }\n  }, renderTextLayer ? React.createElement(StructTree, null) : null);\n}\nPageCanvas.propTypes = {\n  canvasRef: isRef\n};","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","mergeRefs","invariant","warning","pdfjs","StructTree","usePageContext","cancelRunningTask","getDevicePixelRatio","isCancelException","makePageCallback","isRef","ANNOTATION_MODE","AnnotationMode","PageCanvas","props","pageContext","mergedProps","Object","assign","_className","canvasBackground","devicePixelRatioProps","devicePixelRatio","onRenderErrorProps","onRenderError","onRenderSuccessProps","onRenderSuccess","page","renderForms","renderTextLayer","rotate","scale","canvasRef","canvasElement","error","toString","renderViewport","getViewport","rotation","viewport","drawPageOnCanvas","cleanup","canvas","current","width","height","style","concat","Math","floor","visibility","renderContext","annotationMode","ENABLE_FORMS","ENABLE","canvasContext","getContext","alpha","background","cancellable","render","runningTask","promise","then","catch","createElement","className","dir","ref","display","userSelect","propTypes"],"sources":["C:/Users/srika/Documents/GitHub/Grog_pdf/locofy-react-project/node_modules/react-pdf/dist/esm/Page/PageCanvas.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport mergeRefs from 'merge-refs';\nimport invariant from 'tiny-invariant';\nimport warning from 'tiny-warning';\nimport * as pdfjs from 'pdfjs-dist';\nimport StructTree from '../StructTree';\nimport usePageContext from '../shared/hooks/usePageContext';\nimport { cancelRunningTask, getDevicePixelRatio, isCancelException, makePageCallback, } from '../shared/utils';\nimport { isRef } from '../shared/propTypes';\nconst ANNOTATION_MODE = pdfjs.AnnotationMode;\nexport default function PageCanvas(props) {\n    const pageContext = usePageContext();\n    invariant(pageContext, 'Unable to find Page context.');\n    const mergedProps = Object.assign(Object.assign({}, pageContext), props);\n    const { _className, canvasBackground, devicePixelRatio: devicePixelRatioProps, onRenderError: onRenderErrorProps, onRenderSuccess: onRenderSuccessProps, page, renderForms, renderTextLayer, rotate, scale, } = mergedProps;\n    const { canvasRef } = props;\n    const canvasElement = useRef(null);\n    invariant(page, 'Attempted to render page canvas, but no page was specified.');\n    const devicePixelRatio = devicePixelRatioProps || getDevicePixelRatio();\n    /**\n     * Called when a page is rendered successfully.\n     */\n    function onRenderSuccess() {\n        if (!page) {\n            // Impossible, but TypeScript doesn't know that\n            return;\n        }\n        if (onRenderSuccessProps) {\n            onRenderSuccessProps(makePageCallback(page, scale));\n        }\n    }\n    /**\n     * Called when a page fails to render.\n     */\n    function onRenderError(error) {\n        if (isCancelException(error)) {\n            return;\n        }\n        warning(false, error.toString());\n        if (onRenderErrorProps) {\n            onRenderErrorProps(error);\n        }\n    }\n    const renderViewport = useMemo(() => page.getViewport({ scale: scale * devicePixelRatio, rotation: rotate }), [devicePixelRatio, page, rotate, scale]);\n    const viewport = useMemo(() => page.getViewport({ scale, rotation: rotate }), [page, rotate, scale]);\n    function drawPageOnCanvas() {\n        if (!page) {\n            return;\n        }\n        // Ensures the canvas will be re-rendered from scratch. Otherwise all form data will stay.\n        page.cleanup();\n        const { current: canvas } = canvasElement;\n        if (!canvas) {\n            return;\n        }\n        canvas.width = renderViewport.width;\n        canvas.height = renderViewport.height;\n        canvas.style.width = `${Math.floor(viewport.width)}px`;\n        canvas.style.height = `${Math.floor(viewport.height)}px`;\n        canvas.style.visibility = 'hidden';\n        const renderContext = {\n            annotationMode: renderForms ? ANNOTATION_MODE.ENABLE_FORMS : ANNOTATION_MODE.ENABLE,\n            canvasContext: canvas.getContext('2d', { alpha: false }),\n            viewport: renderViewport,\n        };\n        if (canvasBackground) {\n            renderContext.background = canvasBackground;\n        }\n        const cancellable = page.render(renderContext);\n        const runningTask = cancellable;\n        cancellable.promise\n            .then(() => {\n            canvas.style.visibility = '';\n            onRenderSuccess();\n        })\n            .catch(onRenderError);\n        return () => cancelRunningTask(runningTask);\n    }\n    useEffect(drawPageOnCanvas, \n    // Ommitted callbacks so they are not called every time they change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n        canvasBackground,\n        canvasElement,\n        devicePixelRatio,\n        page,\n        renderForms,\n        renderViewport,\n        viewport,\n    ]);\n    const cleanup = useCallback(() => {\n        const { current: canvas } = canvasElement;\n        /**\n         * Zeroing the width and height cause most browsers to release graphics\n         * resources immediately, which can greatly reduce memory consumption.\n         */\n        if (canvas) {\n            canvas.width = 0;\n            canvas.height = 0;\n        }\n    }, [canvasElement]);\n    useEffect(() => cleanup, [cleanup]);\n    return (React.createElement(\"canvas\", { className: `${_className}__canvas`, dir: \"ltr\", ref: mergeRefs(canvasRef, canvasElement), style: {\n            display: 'block',\n            userSelect: 'none',\n        } }, renderTextLayer ? React.createElement(StructTree, null) : null));\n}\nPageCanvas.propTypes = {\n    canvasRef: isRef,\n};\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,SAAS,EAAEC,OAAO,EAAEC,MAAM,QAAQ,OAAO;AACtE,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,SAAS,MAAM,gBAAgB;AACtC,OAAOC,OAAO,MAAM,cAAc;AAClC,OAAO,KAAKC,KAAK,MAAM,YAAY;AACnC,OAAOC,UAAU,MAAM,eAAe;AACtC,OAAOC,cAAc,MAAM,gCAAgC;AAC3D,SAASC,iBAAiB,EAAEC,mBAAmB,EAAEC,iBAAiB,EAAEC,gBAAgB,QAAS,iBAAiB;AAC9G,SAASC,KAAK,QAAQ,qBAAqB;AAC3C,IAAMC,eAAe,GAAGR,KAAK,CAACS,cAAc;AAC5C,eAAe,SAASC,UAAUA,CAACC,KAAK,EAAE;EACtC,IAAMC,WAAW,GAAGV,cAAc,CAAC,CAAC;EACpCJ,SAAS,CAACc,WAAW,EAAE,8BAA8B,CAAC;EACtD,IAAMC,WAAW,GAAGC,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEH,WAAW,CAAC,EAAED,KAAK,CAAC;EACxE,IAAQK,UAAU,GAA8LH,WAAW,CAAnNG,UAAU;IAAEC,gBAAgB,GAA4KJ,WAAW,CAAvMI,gBAAgB;IAAoBC,qBAAqB,GAAmIL,WAAW,CAArLM,gBAAgB;IAAwCC,kBAAkB,GAAgGP,WAAW,CAA5IQ,aAAa;IAAuCC,oBAAoB,GAAyDT,WAAW,CAAzGU,eAAe;IAAwBC,IAAI,GAAmDX,WAAW,CAAlEW,IAAI;IAAEC,WAAW,GAAsCZ,WAAW,CAA5DY,WAAW;IAAEC,eAAe,GAAqBb,WAAW,CAA/Ca,eAAe;IAAEC,MAAM,GAAad,WAAW,CAA9Bc,MAAM;IAAEC,KAAK,GAAMf,WAAW,CAAtBe,KAAK;EAC1M,IAAQC,SAAS,GAAKlB,KAAK,CAAnBkB,SAAS;EACjB,IAAMC,aAAa,GAAGlC,MAAM,CAAC,IAAI,CAAC;EAClCE,SAAS,CAAC0B,IAAI,EAAE,6DAA6D,CAAC;EAC9E,IAAML,gBAAgB,GAAGD,qBAAqB,IAAId,mBAAmB,CAAC,CAAC;EACvE;AACJ;AACA;EACI,SAASmB,eAAeA,CAAA,EAAG;IACvB,IAAI,CAACC,IAAI,EAAE;MACP;MACA;IACJ;IACA,IAAIF,oBAAoB,EAAE;MACtBA,oBAAoB,CAAChB,gBAAgB,CAACkB,IAAI,EAAEI,KAAK,CAAC,CAAC;IACvD;EACJ;EACA;AACJ;AACA;EACI,SAASP,aAAaA,CAACU,KAAK,EAAE;IAC1B,IAAI1B,iBAAiB,CAAC0B,KAAK,CAAC,EAAE;MAC1B;IACJ;IACAhC,OAAO,CAAC,KAAK,EAAEgC,KAAK,CAACC,QAAQ,CAAC,CAAC,CAAC;IAChC,IAAIZ,kBAAkB,EAAE;MACpBA,kBAAkB,CAACW,KAAK,CAAC;IAC7B;EACJ;EACA,IAAME,cAAc,GAAGtC,OAAO,CAAC;IAAA,OAAM6B,IAAI,CAACU,WAAW,CAAC;MAAEN,KAAK,EAAEA,KAAK,GAAGT,gBAAgB;MAAEgB,QAAQ,EAAER;IAAO,CAAC,CAAC;EAAA,GAAE,CAACR,gBAAgB,EAAEK,IAAI,EAAEG,MAAM,EAAEC,KAAK,CAAC,CAAC;EACtJ,IAAMQ,QAAQ,GAAGzC,OAAO,CAAC;IAAA,OAAM6B,IAAI,CAACU,WAAW,CAAC;MAAEN,KAAK,EAALA,KAAK;MAAEO,QAAQ,EAAER;IAAO,CAAC,CAAC;EAAA,GAAE,CAACH,IAAI,EAAEG,MAAM,EAAEC,KAAK,CAAC,CAAC;EACpG,SAASS,gBAAgBA,CAAA,EAAG;IACxB,IAAI,CAACb,IAAI,EAAE;MACP;IACJ;IACA;IACAA,IAAI,CAACc,OAAO,CAAC,CAAC;IACd,IAAiBC,MAAM,GAAKT,aAAa,CAAjCU,OAAO;IACf,IAAI,CAACD,MAAM,EAAE;MACT;IACJ;IACAA,MAAM,CAACE,KAAK,GAAGR,cAAc,CAACQ,KAAK;IACnCF,MAAM,CAACG,MAAM,GAAGT,cAAc,CAACS,MAAM;IACrCH,MAAM,CAACI,KAAK,CAACF,KAAK,MAAAG,MAAA,CAAMC,IAAI,CAACC,KAAK,CAACV,QAAQ,CAACK,KAAK,CAAC,OAAI;IACtDF,MAAM,CAACI,KAAK,CAACD,MAAM,MAAAE,MAAA,CAAMC,IAAI,CAACC,KAAK,CAACV,QAAQ,CAACM,MAAM,CAAC,OAAI;IACxDH,MAAM,CAACI,KAAK,CAACI,UAAU,GAAG,QAAQ;IAClC,IAAMC,aAAa,GAAG;MAClBC,cAAc,EAAExB,WAAW,GAAGjB,eAAe,CAAC0C,YAAY,GAAG1C,eAAe,CAAC2C,MAAM;MACnFC,aAAa,EAAEb,MAAM,CAACc,UAAU,CAAC,IAAI,EAAE;QAAEC,KAAK,EAAE;MAAM,CAAC,CAAC;MACxDlB,QAAQ,EAAEH;IACd,CAAC;IACD,IAAIhB,gBAAgB,EAAE;MAClB+B,aAAa,CAACO,UAAU,GAAGtC,gBAAgB;IAC/C;IACA,IAAMuC,WAAW,GAAGhC,IAAI,CAACiC,MAAM,CAACT,aAAa,CAAC;IAC9C,IAAMU,WAAW,GAAGF,WAAW;IAC/BA,WAAW,CAACG,OAAO,CACdC,IAAI,CAAC,YAAM;MACZrB,MAAM,CAACI,KAAK,CAACI,UAAU,GAAG,EAAE;MAC5BxB,eAAe,CAAC,CAAC;IACrB,CAAC,CAAC,CACGsC,KAAK,CAACxC,aAAa,CAAC;IACzB,OAAO;MAAA,OAAMlB,iBAAiB,CAACuD,WAAW,CAAC;IAAA;EAC/C;EACAhE,SAAS,CAAC2C,gBAAgB;EAC1B;EACA;EACA,CACIpB,gBAAgB,EAChBa,aAAa,EACbX,gBAAgB,EAChBK,IAAI,EACJC,WAAW,EACXQ,cAAc,EACdG,QAAQ,CACX,CAAC;EACF,IAAME,OAAO,GAAG7C,WAAW,CAAC,YAAM;IAC9B,IAAiB8C,MAAM,GAAKT,aAAa,CAAjCU,OAAO;IACf;AACR;AACA;AACA;IACQ,IAAID,MAAM,EAAE;MACRA,MAAM,CAACE,KAAK,GAAG,CAAC;MAChBF,MAAM,CAACG,MAAM,GAAG,CAAC;IACrB;EACJ,CAAC,EAAE,CAACZ,aAAa,CAAC,CAAC;EACnBpC,SAAS,CAAC;IAAA,OAAM4C,OAAO;EAAA,GAAE,CAACA,OAAO,CAAC,CAAC;EACnC,OAAQ9C,KAAK,CAACsE,aAAa,CAAC,QAAQ,EAAE;IAAEC,SAAS,KAAAnB,MAAA,CAAK5B,UAAU,aAAU;IAAEgD,GAAG,EAAE,KAAK;IAAEC,GAAG,EAAEpE,SAAS,CAACgC,SAAS,EAAEC,aAAa,CAAC;IAAEa,KAAK,EAAE;MACjIuB,OAAO,EAAE,OAAO;MAChBC,UAAU,EAAE;IAChB;EAAE,CAAC,EAAEzC,eAAe,GAAGlC,KAAK,CAACsE,aAAa,CAAC7D,UAAU,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC;AAC5E;AACAS,UAAU,CAAC0D,SAAS,GAAG;EACnBvC,SAAS,EAAEtB;AACf,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}